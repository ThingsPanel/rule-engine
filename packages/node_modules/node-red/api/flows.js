var RED = require("../lib/red.js");

module.exports = {
    startFlow: function (req, res) {
        let flow = req.body
        flow.disabled = false;
        RED.runtime.flows.updateFlow({id: flow.id, req, flow: flow, user: "admin"})
            .then(res => {
                console.log("ThingsPanel==============================启动flow:" + flow.id)
                // RED.runtime.projects.commit({ user: "admin", id: "", message:"", req}).then()

            })
        // RED.runtime.projects.
        var result = { code:200, success:true, message:"启动成功！", data: req.body}
        res.send(result)
    },
    stopFlow: function (req, res) {
        let flow = req.body
        flow.disabled = true;
        RED.runtime.flows.updateFlow({id: flow.id, req, flow: flow, user: "admin"})
            .then(res => {
                console.log("ThingsPanel==============================停止flow:" + flow.id)
                // RED.runtime.projects.commit({ user: "admin", id: "", message:"", req}).then()
                // RED.runtime.projects.


            })
        // RED.runtime.projects.
        var result = { code:200, success:true, message:"停止成功！", data: req.body}
        res.send(result)
    },

}